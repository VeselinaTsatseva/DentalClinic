SET SCHEMA FN71943;

-- INSERT

INSERT INTO PATIENTS
VALUES (9708197123, 0888323205, 'Мария Петкова', '1997-08-19', 'mariapetkova@abv.bg'),
       (6801234554, 0893241255, 'Наталия Иванова', '1968-01-23', 'nataliaivanova@gmail.com'),
       (8905123448, 0887945671, 'Димитър Петров', '1989-05-12', 'dimitarpetrox@gmail.com'),
       (9043109878, 0899436844, 'Георги Захариев', '2000-03-10', 'georgizahariev@abv.bg'),
       (7906307754, 0891102003, 'Петър Михайлов', '1979-06-30', 'petar.mihailov@abv.bg'),
       (9901255497, 0888670127, 'Теодора Спасова', '1999-01-25', 'tedispasova@abv.bg'),
       (9202115647, 0897755321, 'Ана Александрова', '1992-02-11', 'anial@gmail.com');

INSERT INTO DOCTORS
VALUES (299342, 'Петя Попова', 'Хирург', 0881231109),
       (224598, 'Николай Петров', 'Зъболекар', 0888975438),
       (134008, 'Младен Димитров', 'Зъболекар', 0897652311),
       (453129, 'Иван Тодоров', 'Ортодонт', 0886162344),
       (389007, 'Милко Павлов', 'Ортодонт', 0882201923);

INSERT INTO APPOINTMENTS
VALUES (110321, '2021-03-11', '13:30', 9708197123, 299342),
       (141220, '2020-12-14', '10:40', 6801234554, 224598),
       (230920, '2020-09-23', '15:20', 8905123448, 134008),
       (150421, '2021-04-15', '11:00', 9043109878, 453129),
       (100521, '2021-05-10', '16:40', 7906307754, 389007),
       (200521, '2021-05-20', '12:00', 9901255497, 453129),
       (201220, '2020-12-20', '12:30', 9202115647, 224598);

INSERT INTO TREATMENTS
VALUES (1051, 'Поставяне на пломба', 50),
       (1602, 'Профилактичен преглед', 20),
       (1003, 'Почистване на зъбен камък', 70),
       (1104, 'Избелване на зъби', 200),
       (2045, 'Екстракция на мъдрец', 200),
       (2019, 'Металокерамична коронка', 190),
       (1029, 'Керамична коронка', 450),
       (1782, 'Поставяне на зъбен имплант', 1200),
       (2347, 'Поставяне на брекети', 3000);

INSERT INTO ISDONE
VALUES (110321, 1051),
       (141220, 1003),
       (230920, 1104),
       (150421, 1029),
       (100521, 1782),
       (200521, 2347),
       (201220, 2019);

INSERT INTO OFFERS
VALUES (224598, 1051),
       (134008, 1051),
       (299342, 1602),
       (224598, 1602),
       (134008, 1602),
       (453129, 1602),
       (389007, 1602),
       (224598, 1003),
       (134008, 1003),
       (224598, 1104),
       (134008, 1104),
       (299342, 2045),
       (224598, 2019),
       (134008, 2019),
       (224598, 1029),
       (134008, 1029),
       (453129, 2347),
       (389007, 2347),
       (453129, 1782),
       (389007, 1782);

-- VIEW

CREATE VIEW V_TREATMENTS_DONE
AS
SELECT P.NAME, A.DATE, T.TYPE
FROM APPOINTMENTS A, PATIENTS P, ISDONE I, TREATMENTS T
WHERE A.PATIENTID = P.EGN
AND   A.APPOINTMENTID = I.APPOINTMENTID
AND   I.TREATMENTID = T.TREATMENTID;


CREATE VIEW V_DOCTOR_OFFERS
AS
SELECT D.NAME, T.TYPE, T.PRICE
FROM DOCTORS D, OFFERS O, TREATMENTS T
WHERE D.DOCID = O.DOCID
AND   O.TREATMENTID = T.TREATMENTID;